<div class="container">

<h1>JobTrack</h1>

<% if current_user %>
  <%= link_to "New Application", "/job_applications/new", class: "btn btn-primary btn-lg mb-3" %>
<% else %>
  <p>You are not signed in</p>
<% end %>




  <% if current_user%>
    <div class="container">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">Application Date</th>
            <th scope="col">Job Title</th>
            <th scope="col">Company</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          <% current_user.job_applications.each do |application| %>
            <tr class="clickable-row" data-href="/job_applications/<%= application.id %>" style="cursor: pointer;">
              <th scope="row">
                <%= application.application_date.strftime("%m/%d/%y") %>
              </th>
              <td><%= application.description.job_title %></td>
              <td><%= application.description.company.name %></td>
              <td><%= application.status %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    document
      .querySelectorAll(".clickable-row")
      .forEach(function(row) {
        row.addEventListener("click", function() {
          window.location = this.dataset.href;
        });
      });
  });
</script>
